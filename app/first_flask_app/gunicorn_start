# Input Your Setting(gunicorn_start):
# Read the gunicorn Documents
# - (https://gunicorn.org/#quickstart)
#
#  Example 1)
#	+ main.py in app=Flask(__name__)
#		>> PROGRAM="main:app"
#
#  Example 2)
#	+ main.py in application=Flask(__name__)
#		>> PROGRAM="main"
#               or
#       >> PROGRAM="main:application"
#

PROGRAM="main"

# ACCESSLOG
ACCESSLOG="/Users/ryohei/Desktop/program/Py/PySeisaku/webapp/app/first_flask_app/manage/logs/gunicorn_access_log"
# ERRORLOG
ERRORLOG="/Users/ryohei/Desktop/program/Py/PySeisaku/webapp/app/first_flask_app/manage/logs/gunicorn_error_log"

# Input Your Host & Port Number:
ADDRESS="127.0.0.1:5001"

# WORKER
WORKER=2

cd `dirname $0`

GUNICORN_COMMAND=`which gunicorn`

if [ "$GUNICORN_COMMAND" = "" ] ;then
	echo "- command not found ( at gunicorn ) "
	echo "- install gunicorn, read the document."
	echo "- https://gunicorn.org/#quickstart"
	echo "> pip install gunicorn"
	echo "> gunicorn -w 4 main"
	`open "https://gunicorn.org/#quickstart"`
	exit 1
fi

if [ -z "$ADDRESS" ] ;then
	# Default Address
	ADDRESS='127.0.0.1:8080'
fi

gunicorn -w "$WORKER" -b "$ADDRESS" --access-logfile "$ACCESSLOG" --error-logfile "$ERRORLOG" "$PROGRAM"

        